<!DOCTYPE html>
<html lang="en">

<head>
  <title>Bootstrap Example</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="Colorlib Templates">
  <meta name="author" content="Colorlib">
  <meta name="keywords" content="Colorlib Templates">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
  <!-- Icons font CSS-->
  <link href="vendor/mdi-font/css/material-design-iconic-font.min.css" rel="stylesheet" media="all">
  <link href="vendor/font-awesome-4.7/css/font-awesome.min.css" rel="stylesheet" media="all">
  <!-- Font special for pages-->
  <!--<link href="https://fonts.googleapis.com/css?family=Poppins:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet">-->

  <!-- Vendor CSS-->
  <link href="vendor/select2/select2.min.css" rel="stylesheet" media="all">
  <link href="vendor/datepicker/daterangepicker.css" rel="stylesheet" media="all">

  <!-- Main CSS-->
  <link href="css/main.css" rel="stylesheet" media="all">
</head>
<style>
  #cable {
    font-family: Montserrat;
    font-weight: 600;
    background: #c2b697 !important;
    font-size: 1rem;
    letter-spacing: 0;
    color: #c2b697;
    text-transform: uppercase;
  }

  #myDIV {
    width: 30%;
    height: 30px;
    font-size: 24px;
    font-style: normal;
    text-align: left;

  }

  #titl {
    width: 20px;
    height: 20px;
    font-size: 24px;
    font-style: normal;

  }


  .numberCircle {
    border-radius: 50%;
    behavior: url(PIE.htc);
    /* remove if you don't care about IE8 */
    width: 55px;
    height: 55px;
    padding: 8px;
    background: #f2dede;
    color: #fff;
    text-align: center;
    font: 32px Arial, sans-serif;
    display: inline-block
  }

  .numberCircle:hover {
    border: 2px solid #666;
    background: #000000;
  }

  th {
    text-align: center;
  }

  td {
    text-align: center;
  }

  .days {
    font-family: Montserrat;
    font-weight: 600;
    /*background: #c2b697 !important;*/
    background: #c2b697 !important;
    font-size: 4rem;
    letter-spacing: 0;
    color: #fff;
    text-transform: uppercase;
  }
</style>

<body>

  <!--<div class="page-wrapper bg-gra-01 p-t-180 p-b-100 font-poppins">-->
  <div class="container">
    <h2>Calender</h2>
    <table id="cable" class="table table-bordered table-dark" align="center">
      <thead>
        <tr class="days">
          <th>Mon</th>
          <th>Tue</th>
          <th>Wed</th>
          <th>Thu</th>
      </thead>
      <tbody>
        <tr class="bg-danger background-color">
          <td><span class="numberCircle">1</span></td>
          <td><span class="numberCircle">2</span></td>
          <td><span class="numberCircle">3</span></td>
          <td><span class="numberCircle">4</span></td>

        </tr>
        <tr class="bg-danger background-color">
          <td><span class="numberCircle">5</span></td>
          <td><span class="numberCircle">6</span></td>
          <td><span class="numberCircle">7</span></td>
          <td><span class="numberCircle">8</span></td>
        </tr>
        <tr class="bg-danger background-color">
          <td><span class="numberCircle">9</span></td>
          <td><span class="numberCircle">10</span></td>
          <td><span class="numberCircle">11</span></td>
          <td><span class="numberCircle">12</span></td>
        </tr>
        <tr class="bg-danger background-color">
          <td><span class="numberCircle">13</span></td>
          <td><span class="numberCircle">14</span></td>
          <td><span class="numberCircle">15</span></td>
          <td><span class="numberCircle">16</span></td>
        </tr>
      </tbody>
    </table>

    <div id="myDIV">
      <h1 id="dno"></h1>
      <ul class="list-group">
        <li class="list-group-item list-group-item-action active">10AM - 11AM <button id="s1" onclick="popup(this,'s1')"
            data-toggle="modal" data-target="#exampleModal" type="button" class="btn btn-info">Primary</button></li>
        <li class="list-group-item list-group-item-action active">11AM - 12PM <button id="s2" onclick="popup(this,'s2')"
            data-toggle="modal" data-target="#exampleModal" type="button" class="btn btn-info">Primary</button></li>
        <li class="list-group-item list-group-item-action active">Lunch </li>
        <li class="list-group-item list-group-item-action active">2PM - 3PM <button id="s3" onclick="popup(this,'s3')"
            data-toggle="modal" data-target="#exampleModal" type="button" class="btn btn-info">Primary</button></li>
        <li class="list-group-item list-group-item-action active">3PM - 4PM <button id="s4" onclick="popup(this,'s4')"
            data-toggle="modal" data-target="#exampleModal" type="button" class="btn btn-info">Primary</button></li>

      </ul>
    </div>
    <p id="demo"></p>


  </div>


  <!-- Modal -->

  <!--<div class="page-wrapper bg-gra-01 p-t-180 p-b-100 font-poppins">-->
  <!-- <div    class="wrapper wrapper--w780">
        <div   class="card card-3">
            <div  class="card-heading">
            <div  class="card-body">
                <h2 class="title" id="titl">Registration Info</h2>
                <form >
                    <div class="input-group">
                        <input class="input--style-3" type="text" id="name" placeholder="Name" name="name">
                    </div>
                    <div class="input-group">
                      <input class="input--style-3" type="email" id="mob" placeholder="Mobile" name="mobile">
                  </div>
                  <div class="p-t-10">
                    <button onclick="apply()" class="btn btn--pill btn--green" type="submit">Submit</button>
                </div>
            </form>
        </div>
      </div>
    </div>
  </div> -->
  <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">

        <div class="modal-header bg-danger background-color">
          <h5 class="modal-title" id="titl">Modal title</h5>
          <button type="button" class="close btn btn-info" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>

        <div class="modal-body bg-orange background-color">
          <form>
            <div class="input-group form-group">
              <label for="validationTooltip01">Name </label>
              <input type="text" class="form-control btn btn-primary" id="name" placeholder="Name">
            </div>
            <div class="input-group form-group">
              <label for="validationTooltip02">Mobile</label>
              <input type="text" class="form-control btn btn-primary" id="mob" placeholder="Mobile">
            </div>
          </form>
        </div>

        <div class="p-t-10 modal-footer bg-info background-color">
          <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
          <button type="button" onclick="apply()" data-dismiss="modal" class="btn btn-primary">Submit</button>
        </div>

      </div>
    </div>


  </div>
  <script src="vendor/jquery/jquery.min.js"></script>
  <!-- Vendor JS-->
  <script src="vendor/select2/select2.min.js"></script>
  <script src="vendor/datepicker/moment.min.js"></script>
  <script src="vendor/datepicker/daterangepicker.js"></script>


  <script language="javascript">
    var tbl = document.getElementById("cable");
    if (tbl != null) {
      for (var i = 0; i < tbl.rows.length; i++) {
        for (var j = 0; j < tbl.rows[i].cells.length; j++) {
          tbl.rows[i].cells[j].onclick = function () {

            getval(this);

          };
        }
      }
    }

    var date;
    var gslot;
    var gcurrent;
    var values = [];
    var bookedTime = [];
    var bookings = [{
      date: 1,
      slots: [false, false, false, false],
    }, {
      date: 2,
      slots: [false, false, false, false],
    }, {
      date: 3,
      slots: [false, false, false, false],
    }, {
      date: 4,
      slots: [false, false, false, false],
    }]

    function getval(cel) {
      date = cel.getElementsByTagName('span')[0].innerHTML;

      console.log(date)
      console.log(bookings[date - 1]);
      var buttonState = bookings[date - 1].slots;
      console.log(buttonState);
      document.getElementById('s1').disabled = buttonState[0];
      document.getElementById('s2').disabled = buttonState[1];
      document.getElementById('s3').disabled = buttonState[2];
      document.getElementById('s4').disabled = buttonState[3];

      values.push(cel.innerHTML);
      console.log(values);
      console.log(cel.innerHTML);
      var x = document.getElementById("dno");

      console.log(x)
      x.innerHTML = cel.innerHTML;

    }



    function popup(current, slot) {
      var cbl = document.getElementById("titl");
      gcurrent = current;
      cbl.innerHTML = date + " " + slot;
      gslot = slot;
      console.log(date, slot);
    }

    function apply() {

      var name = document.getElementById("name").value;
      var mob = document.getElementById("mob").value;

      console.log(date, gslot, name, mob);

      addAppoint({
        date: date,
        slot: gslot,
        name: name,
        mobile: mob
      });
      bookedTime.push(date + "-" + gslot);
      console.log(bookedTime);


      document.getElementById("name").value = "";
      document.getElementById("mob").value = "";
      gcurrent.disabled = true;
      // slots buttons functions 
      if (gslot === 's1') {
        bookings[date - 1].slots[0] = true;
      } else if (gslot === 's2') {
        bookings[date - 1].slots[1] = true;
      } else if (gslot === 's3') {
        bookings[date - 1].slots[2] = true;
      } else if (gslot === 's4') {
        bookings[date - 1].slots[3] = true;
      }
    }


    function addAppoint(obj) {
      var xhttp = new XMLHttpRequest();
      xhttp.onreadystatechange = function () {
        if (this.readyState == 4 && this.status == 200) {
          document.getElementById("demo").innerHTML = this.responseText;
        }
      };
      xhttp.open("POST", "http://127.0.0.1/db/add_new_appointment.php", true);
      xhttp.setRequestHeader("Content-Type", "application/json");

      xhttp.send(JSON.stringify(obj));
    }
  </script>

</body>

</html>
<!--
    tbl.rows[i].cells[j].onclick = function () { getval(this); };
            }
        }
        function getval(cel) {
            alert(cel.innerHTML);
        }
-->