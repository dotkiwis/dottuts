<!DOCTYPE html>
<html lang="en">

<head>
    <title>Bootstrap Example</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
</head>

<body>

    <div class="container">
        <h2>Table</h2>
        <button onclick="myFunction()">Calender</button>
        <select id="selector"></select>
        <!-- <select id="monthh" >
            <option value="June">June</option>
            <option value="July">July</option>
            <option value="August">August</option>
        </select> -->
        <table id="cable" class="table-bordered table-hover">
            <tr>

                <th>Saturday</th>
                <th>Sunday</th>
                <th>Monday</th>
                <th>Tuesday</th>
                <th>wednesday</th>
                <th>Thursday</th>
                <th>Firday</th>

            </tr>
        </table>

        <div id="myDIV">
            <h1 id="dno"></h1>
            <ul class="list-group">
                <li class="list-group-item">10AM - 11AM <button id="s1" onclick="popup(this,'s1')" data-toggle="modal"
                        data-target="#exampleModal" type="button" class="btn btn-primary">Button 1</button></li>
                <li class="list-group-item">11AM - 12PM <button id="s2" onclick="popup(this,'s2')" data-toggle="modal"
                        data-target="#exampleModal" type="button" class="btn btn-primary">Button 2</button></li>
                <li class="list-group-item">Lunch </li>
                <li class="list-group-item">2PM - 3PM <button id="s3" onclick="popup(this,'s3')" data-toggle="modal"
                        data-target="#exampleModal" type="button" class="btn btn-primary">Button 3</button></li>
                <li class="list-group-item">3PM - 4PM <button id="s4" onclick="popup(this,'s4')" data-toggle="modal"
                        data-target="#exampleModal" type="button" class="btn btn-primary">Button 4</button></li>

            </ul>
        </div>
    </div>
    <!-- Modal -->
    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">

                <div class="modal-header">
                    <h5 class="modal-title" id="titl">Modal title</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>

                <div class="modal-body">
                    <form>
                        <div class="form-group">
                            <label for="exampleInputEmail1">Name </label>
                            <input type="text" class="form-control" id="name" placeholder="Name">
                        </div>
                        <div class="form-group">
                            <label for="exampleInputPassword1">Mobile</label>
                            <input type="text" class="form-control" id="mob" placeholder="Mobile">
                        </div>
                    </form>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" onclick="apply()" data-dismiss="modal" class="btn btn-primary">Submit</button>
                </div>



            </div>
        </div>
    </div>
    <script language="javascript">
        var year = [{
            month: 1,
            monthName: "June",
            days: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25,
                26, 27, 28, 29, 30
            ],
            id: 1,
        }, {
            month: 2,
            monthName: "July",
            days: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25,
                26, 27, 28, 29, 30, 31
            ],
            id :2,
        }, {
            month: 3,
            monthName: "August",
            days: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25,
                26, 27, 28, 29, 30
            ],
            id: 3,
        }]
         
        var b = 0;

        function myFunction() {
            var table = document.getElementById("cable");
            var a = year[1].days;
            for (i = 0; i < a.length / 7; i++) {
                var row = table.insertRow(i);
                if (i < (a.length / 7) - 1) {
                    for (j = 0; j < 7; j++) {
                        console.log("i", i, "j", j, "i+j", i + j, "b", b)
                        var cell1 = row.insertCell(j);
                        cell1.innerHTML = a[i + j + b];
                        cell1.onclick = function () {

                            getval(this, monthh);

                        };
                    }
                    b += 6;
                } else {
                    for (j = 0; j < a.length % 7; j++) {
                        console.log("i", i, "j", j, "i+j", i + j, "b", b)
                        var cell1 = row.insertCell(j);
                        cell1.innerHTML = a[i + j + b];
                        cell1.onclick = function () {

                            getval(this);

                        };

                    }
                }
            }
        }
        var values = [];
        var date;

        var bookings = [];

        function getval(cel) {
            date = cel.innerHTML;
            console.log(cel.innerHTML);
            var buttonState = bookings[date - 1].slots;
            console.log(buttonState);
            document.getElementById('s1').disabled = buttonState[0];
            document.getElementById('s2').disabled = buttonState[1];
            document.getElementById('s3').disabled = buttonState[2];
            document.getElementById('s4').disabled = buttonState[3];
            values.push(cel.innerHTML);
            var x = document.getElementById("dno");

            console.log(x)

            x.innerHTML = cel.innerHTML;
        }
        var gslot;
        var gcurrent;
        var bookedTime = [];

        function popup(current, slot) {
            var cbl = document.getElementById("titl");
            gcurrent = current;
            cbl.innerHTML = date + " " + slot;
            gslot = slot;
            console.log(date, slot);
        }

        function apply() {

            var name = document.getElementById("name").value;
            var mob = document.getElementById("mob").value;
            console.log(date, gslot, name, mob);
            bookedTime.push(date + "-" + gslot);
            console.log(bookedTime);
            document.getElementById("name").value = "";
            document.getElementById("mob").value = "";
            gcurrent.disabled = true;
            if (gslot === 's1') {
                bookings[date - 1].slots[0] = true;
            } else if (gslot === 's2') {
                bookings[date - 1].slots[1] = true;
            } else if (gslot === 's3') {
                bookings[date - 1].slots[2] = true;
            } else if (gslot === 's4') {
                bookings[date - 1].slots[3] = true;
            }


        }
    </script>
</body>

</html>